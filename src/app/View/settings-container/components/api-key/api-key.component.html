<section class="api-key-section">
  <mat-card class="api-key-card">
    <mat-card-content>
      <ng-container *ngIf="loading === true">
        <mat-spinner [diameter]="50" [strokeWidth]="3"></mat-spinner>
      </ng-container>
      <ng-container *ngIf="loading === false">
        <ng-container *ngIf="apistatus === 'failed'">
          <h3>Failed to refresh the API key.</h3>
        </ng-container>
        <ng-container *ngIf="apistatus === 'success'">
          <h3>Successfully refreshed the API key.</h3>
        </ng-container>
        <ng-container *ngIf="apistatus === 'deletefailed'">
          <h3>Failed to delete the API key.</h3>
        </ng-container>
        <ng-container *ngIf="apistatus === 'deletesuccess'">
          <h3>Successfully deleted the API key.</h3>
        </ng-container>
        <ng-container
          *ngIf="
            apistatus !== 'failed' &&
            apistatus !== 'success' &&
            apistatus !== 'deletefailed' &&
            apistatus !== 'deletesuccess'
          "
        >
          <form class="api-key-form">
            <mat-form-field appearance="outline">
              <mat-label>API Key</mat-label>
              <input
                type="text"
                name="apiKey"
                matInput
                placeholder="API Key"
                readonly
                [value]="APIKey$ | async"
              />
            </mat-form-field>
            <button
              mat-raised-button
              color="primary"
              (click)="refreshAPIKey()"
              class="api-key-submit-button"
            >
              <mat-icon>replay</mat-icon>Refresh
            </button>
            <button
              mat-raised-button
              (click)="deleteAPIKey()"
              class="api-ket-delete-button"
            >
              <mat-icon>delete</mat-icon>Delete
            </button>
          </form>
        </ng-container>
      </ng-container>
    </mat-card-content>
  </mat-card>
</section>

