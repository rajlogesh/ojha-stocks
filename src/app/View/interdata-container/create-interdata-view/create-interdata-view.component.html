<mat-card class="interdata-search-section">
  <div class="interdata-toolbar flex">
      <h3 class="interdata-title">Create Interdata View</h3>
      <span class="spacer"></span>
      <a mat-button (click)="location.back()" ><mat-icon>chevron_left</mat-icon> Back</a>
  </div>
</mat-card>
<mat-card *ngIf="userFeedback!=='none'" >
  <section *ngIf="userFeedback=='loading'" class="text-center" >
      <mat-spinner [diameter]="25" [strokeWidth]="2" ></mat-spinner>
  </section>
  <section *ngIf="userFeedback=='success'" class="text-center" >
      Successfully created the interdata View.
  </section>
  <section *ngIf="userFeedback=='failure'" class="text-center" >
      Failed to create the interdata View. Please try again or check the errors.
  </section>
</mat-card>
<mat-card class="create-interdata-table" *ngIf="userFeedback=='none'" >
  <form [formGroup]="createTableForm" (ngSubmit)="createInterdataTable()" >
      <mat-card-content>
          <mat-form-field appearance="outline" >
              <mat-label>View Name</mat-label>
              <input matInput name="viewName" placeholder="Name" type="text" formControlName="viewName" />
              <mat-error>View name is required</mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline" >
              <mat-label>View Name Label</mat-label>
              <input matInput name="viewNameLabel" placeholder="Label" type="text" formControlName="viewNameLabel" />
              <mat-error>View Name label is required</mat-error>
          </mat-form-field>
          <!-- <mat-form-field appearance="outline" >
            <mat-label>Table Name</mat-label>
            <input matInput name="tableName" placeholder="TableName" type="text" formControlName="tableName" />
            <mat-error>Table Name is required</mat-error>
          </mat-form-field>-->
          <mat-form-field appearance="outline">
            <mat-label>Table Name</mat-label>
            <mat-select formControlName="tableName">
              <!-- <mat-option>--</mat-option> -->
              <mat-option *ngFor="let table of tableList" [value]="table">
                {{table}}
              </mat-option>
            </mat-select>
            <!-- <mat-error *ngIf="tableName.hasError('required')">Please choose an animal</mat-error> -->
          </mat-form-field>
          <mat-form-field appearance="outline" >
              <mat-label>Description</mat-label>
              <input matInput name="description" placeholder="Description" type="text" formControlName="description" />
              <mat-error>Description is required</mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline" >
              <mat-label>Partition Key Name</mat-label>
              <input matInput name="partitionKeyName" placeholder="PartitionKeyName" type="text" formControlName="partitionKeyName" />
              <mat-error>Partition key name is required</mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline" >
              <mat-label>Row Key Name</mat-label>
              <input matInput name="rowKeyName" placeholder="Row Key Name" type="text" formControlName="rowKeyName" />
              <mat-error>Row key name is required</mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Fields</mat-label>
            <mat-chip-list #chipList formControlName="fields">
              <mat-chip *ngFor="let field of getFields.value; let i = index;" [selectable]="selectable"
                       [removable]="removable" (removed)="removeField(i)" >
                {{field}}
                <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
              </mat-chip>
              <input matInput placeholder="Fields"
                     [matChipInputFor]="chipList"
                     [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                     [matChipInputAddOnBlur]="addOnBlur"
                     (matChipInputTokenEnd)="addField($event)" >
            </mat-chip-list>
            <mat-hint>(Add more fields by hitting ENTER)</mat-hint>
          </mat-form-field>
      </mat-card-content>
      <mat-card-actions class="text-center" >
          <button mat-raised-button color="primary" class="butn" [disabled]="createTableForm.invalid" >Create</button>
      </mat-card-actions>
  </form>
</mat-card>

